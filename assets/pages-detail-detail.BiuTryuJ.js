import{k as a,l as e,r as t,m as s,p as l,q as c,c as u,w as d,i as o,o as r,b as n,t as f,v as i,x as _,e as m,f as p,y as v,z as y,F as x,A as g,B as h,C as k}from"./index-BrtSbkGa.js";import{_ as Y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const M=Y({__name:"detail",setup(Y){const{safeAreaInsets:M}=a(),b=e(),F=t(s().format("YYYY-MM")),C=t("expense"),I=l(()=>s(F.value).format("YYYY年MM月")),j=l(()=>{const[a,e]=F.value.split("-");return b.getRecordsByMonth(parseInt(a),parseInt(e))}),w=l(()=>j.value),A=l(()=>j.value.filter(a=>"income"===a.type).reduce((a,e)=>a+e.amount,0)),B=l(()=>j.value.filter(a=>"expense"===a.type).reduce((a,e)=>a+e.amount,0)),D=l(()=>A.value-B.value),R=a=>{F.value=a.detail.value},q=a=>{const e=b.categories[C.value].find(e=>e.name===a);return e?e.icon:"📝"};return c(async()=>{await b.fetchRecords()}),(a,e)=>{const t=o,l=m,c=_;return r(),u(t,{class:"detail-container"},{default:d(()=>[n(t,{style:f({height:i(M).top+10+"px"})},null,8,["style"]),n(t,{class:"top"},{default:d(()=>[n(t,{class:"date-selector"},{default:d(()=>[n(t,{class:"time"},{default:d(()=>[n(c,{mode:"date",fields:"month",value:F.value,onChange:R},{default:d(()=>[n(t,{class:"date-display"},{default:d(()=>[n(l,{class:"date-text"},{default:d(()=>[p(v(I.value),1)]),_:1}),n(l,{class:"date-icon"},{default:d(()=>[p("▼")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),n(t,{class:"title"},{default:d(()=>[p("曹筱君记账")]),_:1})]),_:1}),n(t,{class:"stats-cards"},{default:d(()=>[n(t,{class:"stat-card income"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("收入")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("¥"+v(A.value.toFixed(2)),1)]),_:1})]),_:1}),n(t,{class:"stat-card expense"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("支出")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("¥"+v(B.value.toFixed(2)),1)]),_:1})]),_:1}),n(t,{class:"stat-card balance"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("结余")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("¥"+v(D.value.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(t,{class:"records-list"},{default:d(()=>[0===w.value.length?(r(),u(t,{key:0,class:"empty-state"},{default:d(()=>[n(l,{class:"empty-text"},{default:d(()=>[p("暂无"+v("income"===C.value?"收入":"支出")+"记录",1)]),_:1})]),_:1})):(r(),u(t,{key:1,class:"records-container"},{default:d(()=>[(r(!0),y(x,null,g(w.value,a=>(r(),u(t,{key:a.id,class:"record-item",onClick:e=>(a=>{k({title:"编辑记录",content:"是否要编辑这条记录？",success:e=>{e.confirm&&console.log("编辑记录:",a)}})})(a)},{default:d(()=>[n(t,{class:"record-left"},{default:d(()=>[n(t,{class:"category-info"},{default:d(()=>[n(l,{class:"category-icon"},{default:d(()=>[p(v(q(a.category)),1)]),_:2},1024),n(l,{class:"category-name"},{default:d(()=>[p(v(a.category),1)]),_:2},1024)]),_:2},1024),n(l,{class:"record-remark"},{default:d(()=>[p(v(a.remark||"无备注"),1)]),_:2},1024)]),_:2},1024),n(t,{class:"record-right"},{default:d(()=>[n(l,{class:h(["record-amount",a.type])},{default:d(()=>[p(v("income"===a.type?"+":"-")+"¥"+v(a.amount.toFixed(2)),1)]),_:2},1032,["class"]),n(l,{class:"record-date"},{default:d(()=>{return[p(v((e=a.date,s(e).format("MM-DD"))),1)];var e}),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1})]),_:1})}}},[["__scopeId","data-v-698b13d6"]]);export{M as default};
