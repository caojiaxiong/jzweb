import{g as a,u as e,r as t,d as s,c as l,o as c,a as u,w as d,i as o,b as r,e as n,n as f,f as i,h as _,j as m,k as p,t as v,l as y,F as g,m as x,p as h,s as k}from"./index-COzZxKlP.js";import{_ as Y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const M=Y({__name:"detail",setup(Y){const{safeAreaInsets:M}=a(),b=e(),F=t(s().format("YYYY-MM")),I=t("expense"),j=l(()=>s(F.value).format("YYYYå¹´MMæœˆ")),C=l(()=>{const[a,e]=F.value.split("-");return b.getRecordsByMonth(parseInt(a),parseInt(e))}),w=l(()=>C.value),D=l(()=>C.value.filter(a=>"income"===a.type).reduce((a,e)=>a+e.amount,0)),R=l(()=>C.value.filter(a=>"expense"===a.type).reduce((a,e)=>a+e.amount,0)),A=l(()=>D.value-R.value),B=a=>{F.value=a.detail.value},q=a=>{const e=b.categories[I.value].find(e=>e.name===a);return e?e.icon:"ðŸ“"};return c(async()=>{await b.fetchRecords()}),(a,e)=>{const t=o,l=m,c=_;return r(),u(t,{class:"detail-container"},{default:d(()=>[n(t,{style:f({height:i(M).top+10+"px"})},null,8,["style"]),n(t,{class:"top"},{default:d(()=>[n(t,{class:"date-selector"},{default:d(()=>[n(t,{class:"time"},{default:d(()=>[n(c,{mode:"date",fields:"month",value:F.value,onChange:B},{default:d(()=>[n(t,{class:"date-display"},{default:d(()=>[n(l,{class:"date-text"},{default:d(()=>[p(v(j.value),1)]),_:1}),n(l,{class:"date-icon"},{default:d(()=>[p("â–¼")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),n(t,{class:"title"},{default:d(()=>[p("æ›¹ç­±å›è®°è´¦")]),_:1})]),_:1}),n(t,{class:"stats-cards"},{default:d(()=>[n(t,{class:"stat-card income"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("æ”¶å…¥")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("Â¥"+v(D.value.toFixed(2)),1)]),_:1})]),_:1}),n(t,{class:"stat-card expense"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("æ”¯å‡º")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("Â¥"+v(R.value.toFixed(2)),1)]),_:1})]),_:1}),n(t,{class:"stat-card balance"},{default:d(()=>[n(l,{class:"stat-label"},{default:d(()=>[p("ç»“ä½™")]),_:1}),n(l,{class:"stat-amount"},{default:d(()=>[p("Â¥"+v(A.value.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(t,{class:"records-list"},{default:d(()=>[0===w.value.length?(r(),u(t,{key:0,class:"empty-state"},{default:d(()=>[n(l,{class:"empty-text"},{default:d(()=>[p("æš‚æ— "+v("income"===I.value?"æ”¶å…¥":"æ”¯å‡º")+"è®°å½•",1)]),_:1})]),_:1})):(r(),u(t,{key:1,class:"records-container"},{default:d(()=>[(r(!0),y(g,null,x(w.value,a=>(r(),u(t,{key:a.id,class:"record-item",onClick:e=>(a=>{k({title:"ç¼–è¾‘è®°å½•",content:"æ˜¯å¦è¦ç¼–è¾‘è¿™æ¡è®°å½•ï¼Ÿ",success:e=>{e.confirm&&console.log("ç¼–è¾‘è®°å½•:",a)}})})(a)},{default:d(()=>[n(t,{class:"record-left"},{default:d(()=>[n(t,{class:"category-info"},{default:d(()=>[n(l,{class:"category-icon"},{default:d(()=>[p(v(q(a.category)),1)]),_:2},1024),n(l,{class:"category-name"},{default:d(()=>[p(v(a.category),1)]),_:2},1024)]),_:2},1024),n(l,{class:"record-remark"},{default:d(()=>[p(v(a.remark||"æ— å¤‡æ³¨"),1)]),_:2},1024)]),_:2},1024),n(t,{class:"record-right"},{default:d(()=>[n(l,{class:h(["record-amount",a.type])},{default:d(()=>[p(v("income"===a.type?"+":"-")+"Â¥"+v(a.amount.toFixed(2)),1)]),_:2},1032,["class"]),n(l,{class:"record-date"},{default:d(()=>{return[p(v((e=a.date,s(e).format("MM-DD"))),1)];var e}),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1})]),_:1})}}},[["__scopeId","data-v-698b13d6"]]);export{M as default};
