import{u as e,l as s,p as a,q as l,c as t,w as c,i as u,m as n,o as f,b as o,d as i,e as d,f as m,y as r,G as _,s as p,C as g}from"./index-BrtSbkGa.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=v({__name:"profile",setup(v){const w=e(),C=s(),b=a(()=>w.userInfo||{}),k=a(()=>{if(0===C.records.length)return 0;return[...new Set(C.records.map(e=>n(e.date).format("YYYY-MM-DD")))].length}),h=a(()=>C.records.length),x=a(()=>C.balance),y=()=>{_({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths[0],p({title:"头像更新成功",icon:"success"})}})},Y=()=>{g({title:"编辑个人信息",content:"是否要编辑个人信息？",success:e=>{e.confirm&&console.log("编辑个人信息")}})},j=()=>{g({title:"导出数据",content:"是否要导出所有记账数据？",success:e=>{e.confirm&&p({title:"数据导出成功",icon:"success"})}})},F=()=>{g({title:"备份数据",content:"是否要备份当前数据？",success:e=>{e.confirm&&p({title:"数据备份成功",icon:"success"})}})},D=()=>{g({title:"恢复数据",content:"是否要恢复备份的数据？这将覆盖当前数据。",success:e=>{e.confirm&&p({title:"数据恢复成功",icon:"success"})}})},I=()=>{g({title:"关于应用",content:"个人记账 v1.0.0\n\n一个简单易用的个人记账应用，帮助您轻松管理财务。",showCancel:!1})},M=()=>{g({title:"意见反馈",content:"如有问题或建议，请联系开发者。",showCancel:!1})},T=()=>{p({title:"已是最新版本",icon:"success"})},q=()=>{g({title:"退出登录",content:"确定要退出登录吗？",success:e=>{e.confirm&&w.logout()}})};return l(async()=>{await C.fetchRecords()}),(e,s)=>{const a=i,l=d,n=u;return f(),t(n,{class:"profile-container"},{default:c(()=>[o(n,{class:"user-card"},{default:c(()=>[o(n,{class:"user-info"},{default:c(()=>[o(a,{class:"avatar",src:b.value.avatar||"/static/bg.jpg",mode:"aspectFill",onClick:y},null,8,["src"]),o(n,{class:"user-details"},{default:c(()=>[o(l,{class:"nickname"},{default:c(()=>[m(r(b.value.nickname||"未设置昵称"),1)]),_:1}),o(l,{class:"username"},{default:c(()=>[m(r(b.value.username),1)]),_:1})]),_:1}),o(n,{class:"edit-btn",onClick:Y},{default:c(()=>[o(l,{class:"edit-icon"},{default:c(()=>[m("✏️")]),_:1})]),_:1})]),_:1}),o(n,{class:"stats-section"},{default:c(()=>[o(n,{class:"stat-item"},{default:c(()=>[o(l,{class:"stat-number"},{default:c(()=>[m(r(k.value),1)]),_:1}),o(l,{class:"stat-label"},{default:c(()=>[m("记账天数")]),_:1})]),_:1}),o(n,{class:"stat-item"},{default:c(()=>[o(l,{class:"stat-number"},{default:c(()=>[m(r(h.value),1)]),_:1}),o(l,{class:"stat-label"},{default:c(()=>[m("记账笔数")]),_:1})]),_:1}),o(n,{class:"stat-item"},{default:c(()=>[o(l,{class:"stat-number"},{default:c(()=>[m(r(x.value>=0?"+":"")+"¥"+r(x.value.toFixed(2)),1)]),_:1}),o(l,{class:"stat-label"},{default:c(()=>[m("总资产")]),_:1})]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-section"},{default:c(()=>[o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item",onClick:j},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("📊")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("导出数据")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:F},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("💾")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("备份数据")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:D},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("🔄")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("恢复数据")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item",onClick:I},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("ℹ️")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("关于应用")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:M},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("💬")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("意见反馈")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:T},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("🔄")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("检查更新")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item logout",onClick:q},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(l,{class:"menu-icon"},{default:c(()=>[m("🚪")]),_:1}),o(l,{class:"menu-title"},{default:c(()=>[m("退出登录")]),_:1})]),_:1}),o(l,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-f4f7a7fd"]]);export{w as default};
