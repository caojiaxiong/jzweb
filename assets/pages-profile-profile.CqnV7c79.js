import{A as e,u as s,c as a,o as t,a as l,w as c,i as u,d as n,b as f,e as o,B as i,j as d,k as m,t as r,C as _,z as p,s as g}from"./index-CXBwxw54.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=k({__name:"profile",setup(k){const v=e(),w=s(),C=a(()=>v.userInfo||{}),b=a(()=>{if(0===w.records.length)return 0;return[...new Set(w.records.map(e=>n(e.date).format("YYYY-MM-DD")))].length}),h=a(()=>w.records.length),j=a(()=>w.balance),x=()=>{_({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths[0],p({title:"头像更新成功",icon:"success"})}})},Y=()=>{g({title:"编辑个人信息",content:"是否要编辑个人信息？",success:e=>{e.confirm&&console.log("编辑个人信息")}})},y=()=>{g({title:"导出数据",content:"是否要导出所有记账数据？",success:e=>{e.confirm&&p({title:"数据导出成功",icon:"success"})}})},F=()=>{g({title:"备份数据",content:"是否要备份当前数据？",success:e=>{e.confirm&&p({title:"数据备份成功",icon:"success"})}})},z=()=>{g({title:"恢复数据",content:"是否要恢复备份的数据？这将覆盖当前数据。",success:e=>{e.confirm&&p({title:"数据恢复成功",icon:"success"})}})},D=()=>{g({title:"关于应用",content:"个人记账 v1.0.0\n\n一个简单易用的个人记账应用，帮助您轻松管理财务。",showCancel:!1})},I=()=>{g({title:"意见反馈",content:"如有问题或建议，请联系开发者。",showCancel:!1})},M=()=>{p({title:"已是最新版本",icon:"success"})},T=()=>{g({title:"退出登录",content:"确定要退出登录吗？",success:e=>{e.confirm&&v.logout()}})};return t(async()=>{await w.fetchRecords()}),(e,s)=>{const a=i,t=d,n=u;return f(),l(n,{class:"profile-container"},{default:c(()=>[o(n,{class:"user-card"},{default:c(()=>[o(n,{class:"user-info"},{default:c(()=>[o(a,{class:"avatar",src:C.value.avatar||"/static/bg.jpg",mode:"aspectFill",onClick:x},null,8,["src"]),o(n,{class:"user-details"},{default:c(()=>[o(t,{class:"nickname"},{default:c(()=>[m(r(C.value.nickname||"未设置昵称"),1)]),_:1}),o(t,{class:"username"},{default:c(()=>[m(r(C.value.username),1)]),_:1})]),_:1}),o(n,{class:"edit-btn",onClick:Y},{default:c(()=>[o(t,{class:"edit-icon"},{default:c(()=>[m("✏️")]),_:1})]),_:1})]),_:1}),o(n,{class:"stats-section"},{default:c(()=>[o(n,{class:"stat-item"},{default:c(()=>[o(t,{class:"stat-number"},{default:c(()=>[m(r(b.value),1)]),_:1}),o(t,{class:"stat-label"},{default:c(()=>[m("记账天数")]),_:1})]),_:1}),o(n,{class:"stat-item"},{default:c(()=>[o(t,{class:"stat-number"},{default:c(()=>[m(r(h.value),1)]),_:1}),o(t,{class:"stat-label"},{default:c(()=>[m("记账笔数")]),_:1})]),_:1}),o(n,{class:"stat-item"},{default:c(()=>[o(t,{class:"stat-number"},{default:c(()=>[m(r(j.value>=0?"+":"")+"¥"+r(j.value.toFixed(2)),1)]),_:1}),o(t,{class:"stat-label"},{default:c(()=>[m("总资产")]),_:1})]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-section"},{default:c(()=>[o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item",onClick:y},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("📊")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("导出数据")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:F},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("💾")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("备份数据")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:z},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("🔄")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("恢复数据")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item",onClick:D},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("ℹ️")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("关于应用")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:I},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("💬")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("意见反馈")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1}),o(n,{class:"menu-item",onClick:M},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("🔄")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("检查更新")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1}),o(n,{class:"menu-group"},{default:c(()=>[o(n,{class:"menu-item logout",onClick:T},{default:c(()=>[o(n,{class:"menu-left"},{default:c(()=>[o(t,{class:"menu-icon"},{default:c(()=>[m("🚪")]),_:1}),o(t,{class:"menu-title"},{default:c(()=>[m("退出登录")]),_:1})]),_:1}),o(t,{class:"menu-arrow"},{default:c(()=>[m(">")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-f4f7a7fd"]]);export{v as default};
